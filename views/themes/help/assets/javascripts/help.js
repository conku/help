!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";function t(n,o){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,e.isPlainObject(o)&&o),this.init()}var n="qor.help",o="enable."+n,i="disable."+n,r="click."+n,a="keyup."+n;return t.prototype={constructor:t,init:function(){this.bind()},bind:function(){this.$element.on(r,".qor-help__lists a",this.loadDoc).on(a,".qor-help__search",this.search)},unbind:function(){this.$element.off(r,".qor-help__lists a",this.loadDoc).off(a,".qor-help__search",this.search)},search:function(n){if(13==n.keyCode){var o=e(".qor-help__search-category"),i=e(".qor-help__search"),r=e(".qor-help__lists"),a=e(t.TEMPLATE_LOADING),s=[e(this).data().helpFilterUrl,"?",o.prop("name"),"=",o.find("option:selected").text(),"&",i.prop("name"),"=",i.val()].join("");e.ajax(s,{method:"GET",dataType:"html",processData:!1,contentType:!1,beforeSend:function(){r.hide().after(a),window.componentHandler.upgradeElement(a.children()[0])},success:function(t){r.html(e(t).find(".qor-help__lists").html()).show(),a.remove()},error:function(e,t,n){r.show(),a.remove(),window.alert([t,n].join(": "))}})}},loadDoc:function(n){var o=e(n.target),i=o.closest("li"),r=i.find(".qor-doc__preview"),a=e(t.TEMPLATE_LOADING),s=o.data().inlineUrl;return r.size()?(r.toggle(),!1):(e.ajax(s,{method:"GET",dataType:"html",processData:!1,contentType:!1,beforeSend:function(){i.append(a),window.componentHandler.upgradeElement(a.children()[0])},success:function(t){e(e(t).find(".qor-form-container").html()).appendTo(i).addClass("qor-fieldset qor-doc__preview"),a.remove()},error:function(e,t,n){a.remove(),window.alert([t,n].join(": "))}}),!1)},destroy:function(){this.unbind(),this.$element.removeData(n)}},t.TEMPLATE_LOADING='<div style="text-align: center; margin-top: 30px;"><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>',t.plugin=function(o){return this.each(function(){var i,r=e(this),a=r.data(n);if(!a){if(/destroy/.test(o))return;r.data(n,a=new t(this,o))}"string"==typeof o&&e.isFunction(i=a[o])&&i.apply(a)})},e(function(){var n='[data-toggle="qor.help"]';e(document).on(i,function(o){t.plugin.call(e(n,o.target),"destroy")}).on(o,function(o){t.plugin.call(e(n,o.target))}).triggerHandler(o)}),t});